<!-- 


<app-doctornavbar></app-doctornavbar>

<div class="container mt-5 bg-white p-4 rounded shadow-lg">
    <h2 class="text-center mb-4 text-primary">Doctor Appointments</h2>

    <div class="mb-3">
        <input 
            type="text" 
            class="form-control" 
            placeholder="Search by Patient Name and EC NO" 
            [(ngModel)]="searchTerm"
            (input)="filterAppointments()"
        >
    </div>
    
    <table class="table table-striped table-hover">
      <thead class="thead-dark">
        <tr>
          <th>EC NO</th>
          <th>Patient Name</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let appointment of filteredAppointments">
          <td>{{ appointment.PatientId }}</td>
          <td>{{ appointment.PatientName }}</td>
          <td>
            <button 
                class="btn btn-primary btn-sm mr-3"
                [routerLink]="['/prescriptions', appointment.PatientId]">
                Add Prescpription
            </button>
            
            <button class="btn btn-primary btn-sm" 
                [routerLink]="['/history', appointment.PatientId]">
                View Patient History
            </button>
          </td>
        </tr>
      </tbody>
    </table>
</div>
 -->


 <app-doctornavbar></app-doctornavbar>

<div class="container mt-5 bg-white p-4 rounded shadow-lg">
    <h2 class="text-center mb-4 text-primary">Doctor Appointments</h2>

    <!-- Search Input -->
    <div class="mb-3">
        <input 
            type="text" 
            class="form-control" 
            placeholder="Search by Patient Name and EC NO" 
            [(ngModel)]="searchTerm"
            (input)="filterAppointments()"
        >
    </div>
    
    <table class="table table-striped table-hover">
      <thead class="thead-dark">
        <tr>
          <th>EC NO</th>
          <th>Patient Name</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let appointment of paginatedAppointments">
          <td>{{ appointment.PatientId }}</td>
          <td>{{ appointment.PatientName }}</td>
          <td>
            <button 
                class="btn btn-primary btn-sm mr-3"
                [routerLink]="['/prescriptions', appointment.PatientId]">
                Add Prescription
            </button>
            
            <button class="btn btn-primary btn-sm" 
                [routerLink]="['/history', appointment.PatientId]">
                View Patient History
            </button>
          </td>
        </tr>
      </tbody>
    </table>

    <!-- Pagination Controls -->
    <nav>
      <ul class="pagination justify-content-center">
        <li class="page-item" [class.disabled]="currentPage === 1">
          <a class="page-link" (click)="changePage(currentPage - 1)" tabindex="-1">Previous</a>
        </li>
        <li *ngFor="let page of pageNumbers" class="page-item" [class.active]="currentPage === page">
          <a class="page-link" (click)="changePage(page)">{{ page }}</a>
        </li>
        <li class="page-item" [class.disabled]="currentPage === totalPages">
          <a class="page-link" (click)="changePage(currentPage + 1)">Next</a>
        </li>
      </ul>
    </nav>
</div>
